<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_92) on Fri Aug 18 15:52:09 CEST 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>EJBTransactionRolledbackExceptionTest (Java EE Concepts 1.0.0-SNAPSHOT Test API)</title>
<meta name="date" content="2017-08-18">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="EJBTransactionRolledbackExceptionTest (Java EE Concepts 1.0.0-SNAPSHOT Test API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/EJBTransactionRolledbackExceptionTest.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/CustomApplicationException.html" title="class in com.martinandersson.javaee.ejb.exceptions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/RemoteCrashingBean.html" title="interface in com.martinandersson.javaee.ejb.exceptions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html" target="_top">Frames</a></li>
<li><a href="EJBTransactionRolledbackExceptionTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.martinandersson.javaee.ejb.exceptions</div>
<h2 title="Class EJBTransactionRolledbackExceptionTest" class="title">Class EJBTransactionRolledbackExceptionTest</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.martinandersson.javaee.ejb.exceptions.EJBTransactionRolledbackExceptionTest</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">EJBTransactionRolledbackExceptionTest</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">When does the client receive a <code>EJBTransactionRolledbackException</code>?<p>
 
 Looking at the JavaDoc won't reveal much.<p>
 
 Table 7 in EJB 3.2 section "9.3.1 Exceptions from a Session Bean's Business
 Interface Methods and No-Interface View Methods" says that
 <code>EJBTransactionRolledbackException</code> is thrown if the target bean (that
 crashed) inherited the transaction from his client, a transaction that the
 bean marked to roll back.<p>
 
 <code>EJBTransactionRolledbackException</code> is a specialized version of <code>EJBException</code>, so it isn't wrong for the container to throw
 <code>EJBTransactionRolledbackException</code> even if the bean did not inherit
 the transaction used (see
 <a href="../../../../../com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html#targetStartTransaction_txCommitCrash--">targetStartTransaction_txCommitCrash()</a>).<p>
 
 
 
 <h3>Results</h3>
 
 GlassFish and WildFly behave coherently enough as to not break the
 specification. If the target bean inherited the transaction, then both
 servers will throw a <code>EJBTransactionRolledbackException</code>.<p>
 
 Client code trying to find the real cause behind the problem must always dig
 through all causes in the exception hierarchy until he find the furthermost
 cause set. In this case, that will always be an <code>ArithmeticException</code>.
 Please see the individual test methods and comments therein.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Martin Andersson (webmaster at martinandersson.com)</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html#EJBTransactionRolledbackExceptionTest--">EJBTransactionRolledbackExceptionTest</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html#noTransaction--">noTransaction</a></span>()</code>
<div class="block">Uses no transaction at all.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html#targetInheritTransaction_beanCrash--">targetInheritTransaction_beanCrash</a></span>()</code>
<div class="block">Target bean inherit the client's transaction and then crash
 immediately.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html#targetInheritTransaction_txCommitCrash--">targetInheritTransaction_txCommitCrash</a></span>()</code>
<div class="block">Target bean inherit the client's transaction but defer the crash until
 transaction commit.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html#targetStartTransaction_beanCrash--">targetStartTransaction_beanCrash</a></span>()</code>
<div class="block">Target bean start a new transaction but crash immediately.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html#targetStartTransaction_txCommitCrash--">targetStartTransaction_txCommitCrash</a></span>()</code>
<div class="block">Target bean start a new transaction that will crash during commit.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="EJBTransactionRolledbackExceptionTest--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EJBTransactionRolledbackExceptionTest</h4>
<pre>public&nbsp;EJBTransactionRolledbackExceptionTest()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="noTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noTransaction</h4>
<pre>public&nbsp;void&nbsp;noTransaction()</pre>
<div class="block">Uses no transaction at all.<p>
 
 Both GlassFish and WildFly throw a <code>EJBException</code> and not a
 subclass thereof.</div>
</li>
</ul>
<a name="targetStartTransaction_beanCrash--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>targetStartTransaction_beanCrash</h4>
<pre>public&nbsp;void&nbsp;targetStartTransaction_beanCrash()</pre>
<div class="block">Target bean start a new transaction but crash immediately.<p>
 
 Both GlassFish and WildFly throw a <code>EJBException</code> and not a
 subclass thereof. The cause is set properly.</div>
</li>
</ul>
<a name="targetStartTransaction_txCommitCrash--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>targetStartTransaction_txCommitCrash</h4>
<pre>public&nbsp;void&nbsp;targetStartTransaction_txCommitCrash()</pre>
<div class="block">Target bean start a new transaction that will crash during commit.<p>
 
 GlassFish stick to throwing a <code>EJBException</code> and not a subclass
 thereof. WildFly will throw a <code>EJBTransactionRolledbackException</code>.<p>
 
 In both cases, client code must dig to the root cause in order to find
 the <code>ArithmeticException</code>.<p>
 
 Note that it isn't wrong for WildFly to throw the specialized <code>EJBTransactionRolledbackException</code> even though the client didn't start
 the transaction.</div>
</li>
</ul>
<a name="targetInheritTransaction_beanCrash--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>targetInheritTransaction_beanCrash</h4>
<pre>public&nbsp;void&nbsp;targetInheritTransaction_beanCrash()
                                        throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Target bean inherit the client's transaction and then crash
 immediately.<p>
 
 Because the transaction was started by client, the container must throw
 a <code>EJBTransactionRolledbackException</code> which both servers do.
 However, their cause stack differs and client code can only rely on
 finding the root cause if he dig through the entire hierarchy.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - on problem with beginning the transaction or query for
         its status</dd>
</dl>
</li>
</ul>
<a name="targetInheritTransaction_txCommitCrash--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>targetInheritTransaction_txCommitCrash</h4>
<pre>public&nbsp;void&nbsp;targetInheritTransaction_txCommitCrash()
                                            throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Target bean inherit the client's transaction but defer the crash until
 transaction commit.<p>
 
 Indeed the transaction is started by client, but the crash won't happen
 on the bean side this time. Hence the client will discover a <code>RollbackException</code> once he himself commit the transaction.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - on problem with beginning the transaction or query for
         its status</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/EJBTransactionRolledbackExceptionTest.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/CustomApplicationException.html" title="class in com.martinandersson.javaee.ejb.exceptions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/martinandersson/javaee/ejb/exceptions/RemoteCrashingBean.html" title="interface in com.martinandersson.javaee.ejb.exceptions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/martinandersson/javaee/ejb/exceptions/EJBTransactionRolledbackExceptionTest.html" target="_top">Frames</a></li>
<li><a href="EJBTransactionRolledbackExceptionTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017. All rights reserved.</small></p>
</body>
</html>
